<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì¸í˜ì´ì§€</title>
    <!-- head include -->
    <%- include('./include/head')%>
</head>
<body>
    <!-- header include -->
    <%- include('./include/header')%>

    <!-- 
        res.render("index.ejs", {
        user: userID,
        contentData: tempDB, // [{},{}]..ì˜ DB ë°°ì—´ì´ ì €ì¥ë˜ì–´ ìˆìŒ
    });
     -->
    <h2> ì•ˆë…•í•˜ì„¸ìš” <%= user %>ì˜ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤!!</h2>
    <ul>
        <% for (let content of contentData) {%>
        <li>
            <a href="/content/<%= content.contentID %>"> <%= content.title %></a>
            <!-- ìœ„ ë§í¬ë¥¼ ëˆ„ë¥´ë©´ get ìš”ì²­ì´ ê°€ê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ app.js ì—ì„œ ì„ ì–¸ -->
            <button onclick="deleteContent('<%= content.contentID%>', this)">ì‚­ì œ</button>
        </li>
        <%}%>
    </ul>
    <script>
        function deleteContent(contentID, btn) {
            // console.log(contentID);
            // console.log(btn); thisë¡œ ì „ë‹¬ëœ button íƒœê·¸
            if(confirm("ì •ë§ ì‚­ì œí•˜ì‹¤ê±´ê°€ìš”? ğŸ˜•")) {
                // ì‚­ì œ ë¡œì§ ì‘ì„±
                axios({
                    method: 'delete',
                    url: '/blog/delete?contentID=' + contentID,
                })
                .then(function(response) {
                    console.log(response);
                    console.log(response.data);
                })
                .catch(function (err) {
                    console.err(err); //ì—ëŸ¬ ì‹œ ì½˜ì†”ì°½ì´ ë¹¨ê°„ í™”ë©´ìœ¼ë¡œ ë‚˜íƒ€ë‚¨
                });

                // btnì˜ ë¶€ëª¨ë…¸ë“œì¸ lië¥¼ ì„ íƒí•´ì„œ ì‚­ì œí•˜ê² ë‹¤.
                console.log(btn.parentNode);
                btn.parentNode.remove();
            }
        }
    </script>
</body>
</html>